#+TITLE: lan-mouse switch
#+AUTHOR: Rafael Ito
#+PROPERTY: header-args :tangle lanmouse-switch_laptop.sh
#+DESCRIPTION: script to swap keeb/mouse between hosts via lan-mouse software switch KVM
#+STARTUP: showeverything
#+auto_tangle: t

* Table of Contents :toc_3:
- [[#header][Header]]
- [[#toggle][Toggle]]
- [[#right][Right]]

* Header :noexport_1:
** Shebang
#+begin_src sh
#!/usr/bin/env bash
#+end_src
** Help menu
#+begin_src sh
# Usage:
# ./lanmouse-switch.sh toggle
# ./lanmouse-switch.sh left
# ./lanmouse-switch.sh right
# ./lanmouse-switch.sh last
#+end_src
** Description
#+begin_src sh
# alternative to ydotool: wlrctl
# eg: "wlrctl pointer move -9999 -9999"
#+end_src
** Parse parameters
#+begin_src sh
COMMAND="$1"
case "$COMMAND" in
#+end_src
* Toggle
#+begin_src sh
"toggle")
    # [local]
    # force cursor @ (1920,1200)
    ydotool mousemove -x 9999 -y 9999
    # and then to top middle of the screen (x=1920/2; y=0)
    # !!! I don't know why, but it's dividing by 4: (x=1920/4) !!!
    ydotool mousemove -x -480 -y -9999
    
    # [remote]
    # force cursor @ (0,0)
    # and then to middle of the screen (x=1.5*1920; y=1080/2)
    # !!! I don't know why, but it's dividing by 4: (x=1.5*1920/2; y=1080/4) !!!
    ssh catuaba "ydotool mousemove -x -9999 -y -9999 && ydotool mousemove -x 1440 -y 270"
    ;;
#+end_src
* Right
#+begin_src sh
"right")
    # [local]
    # force cursor @ (1920,1200)
    ydotool mousemove -x 9999 -y 9999
    # and then to top middle of the screen (x=1920/2; y=0)
    # !!! I don't know why, but it's dividing by 4: (x=1920/4) !!!
    ydotool mousemove -x -480 -y -9999

    # [remote]
    # force cursor @ (0,0)
    # and then to middle of the vertical right screen (x=2*1920+0.5*1080; y=1920/2)
    # !!! I don't know why, but it's dividing by 4: (x=1.5*1920/2; y=1080/4) !!!
    ssh catuaba "ydotool mousemove -x -9999 -y -9999 && ydotool mousemove -x 2190 -y 480"
    ;;
#+end_src
* EoS :noexport:
#+begin_src sh
esac
#+end_src
